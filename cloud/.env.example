# Database - Connection Pooling with PgBouncer
#
# APPLICATION CONNECTION (via PgBouncer - pooled)
# Use this for all runtime database access. The ?pgbouncer=true flag disables
# Prisma's prepared statements which don't work with transaction-mode pooling.
DATABASE_URL="postgresql://valuerank:valuerank@localhost:6432/valuerank?pgbouncer=true"

# DIRECT CONNECTION (bypasses PgBouncer)
# Used by Prisma Migrate for schema migrations. Migrations require a dedicated
# connection and don't work through connection poolers.
DIRECT_URL="postgresql://valuerank:valuerank@localhost:5433/valuerank"

# API
PORT=3031
NODE_ENV=development
LOG_LEVEL=debug

# Authentication
# JWT signing secret - REQUIRED, minimum 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-secure-random-secret-here-minimum-32-chars
# Token for /admin/db-export endpoint (set in production and local sync environments)
# Generate with: openssl rand -hex 32
# Rotate on a regular schedule and immediately if compromised.
# ADMIN_EXPORT_TOKEN=
# Optional hardening for admin export endpoint
# ADMIN_EXPORT_IP_ALLOWLIST=203.0.113.10,203.0.113.11
# ADMIN_EXPORT_RATE_LIMIT_MAX=10
# ADMIN_EXPORT_TIMEOUT_MS=600000

# Queue System (PgBoss)
# Maintenance interval in seconds (default: 30)
# PGBOSS_MAINTENANCE_INTERVAL=30
# Archive completed jobs after seconds (default: 86400 = 24h)
# PGBOSS_ARCHIVE_AFTER=86400
# Concurrent jobs per type (default: 5)
# QUEUE_WORKER_CONCURRENCY=5

# LLM Providers (not needed for Stage 1, but documented)
# OPENAI_API_KEY=
# ANTHROPIC_API_KEY=
