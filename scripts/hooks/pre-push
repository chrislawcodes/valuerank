#!/bin/bash
# Pre-push hook: Run lint, test, and build checks before allowing push.
# This prevents pushing code that fails CI.

set -e

echo "ğŸ” Running pre-push checks..."

# Change to cloud directory
cd "$(git rev-parse --show-toplevel)/cloud"

echo "ğŸ“¦ Running lint..."
npx turbo lint --force

echo "ğŸ—„ï¸ Preparing test database schema..."
npm run db:test:setup

echo "ğŸ§ª Running tests..."
npx turbo test --force

echo "ğŸ”¨ Running build..."
npx turbo build --force

echo "âœ… Pre-push checks passed!"
